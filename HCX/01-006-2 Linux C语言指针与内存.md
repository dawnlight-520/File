# 006 Linux C语言指针与内存

### 第1章  概述

* 1 指针 数组 字符串

* 2 堆内存 栈内存

* 3 GDB 调试工具

### 第2章  C语言 初始指针

void change(int *a,int *b)  其中*a为指针参数，*+任意参数或者变量均为指针参数或者变量  在调用该函数时需要在参数前+& 即：  change(&a,&b);

变量前加*号表示加入指针。 在main函数中引用指针时是变量前加&号

int *a=&b; a是指针，把b的地址赋给a，a指向b

&取地址符

指针变量不赋初值会出错，temp

```
#include <stdio.h>

void change(int *a,int *b){
    int tmp = *a;
    *a = *b;
    *b = tmp;
}
int main(){
    int a = 3;
    int b = 5;
    change(&a,&b);

    printf("num a=%d\nnum b=%d\n",a,b);
}
```

### 第3章  GDB调试工具的使用

#### 第1节  gdb工具的使用

使用调试功能 gcc -g

gdb		--->		断点调试，单点调试

gcc -g 文件名.c -o 文件名.out		--->		使用gdb编译

gbd ./文件名		--->		开始执行db调试

l：（list）列出源码

回车继续执行刚刚的命令

start		--->		开始执行

break n		--->		截取第n行断点

print或p a 		--->		打印输出变量a

n		--->		跳到下一行继续执行

s  		--->		step 跳入函数

bt 		--->		查看函数堆栈

f		--->		 切换函数堆

f 0		--->		跳转到上层主函数change

f 1		--->		跳转到下层函数main

q 		--->		退出调试

#### 第2节  使用gdb调试案例



### 第4章  指针与内存

#### 第1节  计算机中的数据表示方法

* 计算机是由逻辑电路元件来组成的
* 计算用二进制（0～16）

* 显示为十进制（数字0和1）

* 编程用十六进制（0~9 A ＢＣＤ E F 10 （0*表示16进制））

* 内存中最小的单位是字节 1Byte=8bit

* 一个十六进制的数字，就可以表示4位二进制数字

#### 第2节  内存管理

* 32位bit：内存编号只能编到32个二进制位

  操作系统：管理内存，编号，规划。

  用户内存隔离开的好处：

  1. 操作系统的内存不会被大量占用
  2. 避免机器卡住/卡死/死机等状态
  3. 可通过操作系统把应用关闭
  4. 使得操作系统更安全

```
CPU的地址总线是32位
2的32次方个字节等于多少呢？
2^10*2^10*2^10*2^2
=1024*1024*1024*4字节
=1024*1024*4K
=1024*4M
=4G
```

* 64位bit

```
2^64（其中2^30=G，2^40=T，比TB还大的有PB，EB）
=2^10*2^10*2^10*2^10*2^10*2^10*2^4
=2^60*16
=2^30*2^30*16
=G^2*16
```

系统内核 ---> 栈 ---> 自由可分配内存  --->  堆 ---> 数据段 ---> 代码段

0xffffffffffffffff			         				- - - - - - >										0x0

#### 第3节  变量和指针的本质

